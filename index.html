<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Developer Hub | Interview, Basics & Resources</title>
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --success: #27ae60; --bg: #f4f7f6; --code-bg: #1e1e1e; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); margin: 0; padding: 0; color: #333; }
        
        .tabs { background: var(--primary); display: flex; justify-content: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .tab-btn { background: none; border: none; color: white; padding: 15px 25px; cursor: pointer; font-size: 0.95rem; font-weight: 600; transition: 0.3s; }
        .tab-btn:hover { background: rgba(255,255,255,0.1); }
        .tab-btn.active { background: var(--accent); border-bottom: 4px solid white; }

        .container { max-width: 1000px; margin: 30px auto; padding: 0 20px; }
        .content-section { display: none; }
        .content-section.active { display: block; }

        .q-card { background: white; padding: 25px; margin-bottom: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-left: 5px solid var(--accent); }
        .q-title { font-weight: 700; color: var(--primary); font-size: 1.1rem; display: block; margin-bottom: 12px; }
        
        .btn-group { margin-bottom: 10px; display: flex; gap: 10px; flex-wrap: wrap; }
        .btn { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 0.8rem; transition: 0.2s; }
        .btn-copy { background: var(--primary); color: white; }
        .btn:hover { opacity: 0.8; }
        .btn.copied { background: var(--success) !important; }

        pre { background: var(--code-bg); color: #dcdcdc; padding: 15px; border-radius: 8px; overflow-x: auto; font-family: 'Consolas', monospace; font-size: 0.85rem; line-height: 1.4; }
        
        /* Resource Link Styling */
        .resource-link { display: block; background: white; padding: 20px; border-radius: 10px; text-decoration: none; color: var(--primary); font-weight: bold; margin-bottom: 15px; border: 1px solid #ddd; transition: 0.3s; }
        .resource-link:hover { border-color: var(--accent); background: #ebf5fb; color: var(--accent); }
    </style>
</head>
<body>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab('interview')">Interview Lab (25)</button>
    <button class="tab-btn" onclick="showTab('basics')">Basics Learning</button>
    <button class="tab-btn" onclick="showTab('resources')">Resources</button>
</div>

<div class="container">
    <div id="interview" class="content-section active">
        <header><h1>SQL Interview Lab</h1></header>
        <div id="interview-list"></div>
    </div>

    <div id="basics" class="content-section">
        <header><h1>SQL Basics Guide</h1></header>
        <div id="basics-list"></div>
    </div>

    <div id="resources" class="content-section">
        <header><h1>External Resources</h1></header>
        <a href="https://www.geeksforgeeks.org/sql/mysql-interview-questions/" target="_blank" class="resource-link">
            ðŸ”— GeeksforGeeks: MySQL Interview Questions & Answers
        </a>
        <a href="https://dev.mysql.com/doc/refman/8.0/en/" target="_blank" class="resource-link">
            ðŸ”— Official MySQL Documentation
        </a>
        <a href="https://www.sql-practice.com/" target="_blank" class="resource-link">
            ðŸ”— SQL-Practice.com (Interactive Training)
        </a>
    </div>
</div>

<script>
    // Integration of your full basics script into JSON objects
const interviewData =[
        { 
            id: 1, 
            q: "Find the 2nd highest salary from an employee table.", 
            sql: "SELECT MAX(salary) FROM employee WHERE salary < (SELECT MAX(salary) FROM employee);",
            setup: "CREATE TABLE employee (id INT, name VARCHAR(50), salary INT);\nINSERT INTO employee VALUES (1,'Prasad',50000), (2,'John',60000), (3,'Doe',55000);"
        },
        { 
            id: 2, 
            q: "Find employees who have the same manager.", 
            sql: "SELECT manager_id, GROUP_CONCAT(name) FROM employee GROUP BY manager_id HAVING COUNT(*) > 1;",
            setup: "CREATE TABLE employee (id INT, name VARCHAR(50), manager_id INT);\nINSERT INTO employee VALUES (1,'Amit',10), (2,'Suresh',10), (3,'Rahul',11);"
        },
        { 
            id: 3, 
            q: "Find the first and last record based on 'hire_date'.", 
            sql: "SELECT * FROM employee WHERE hire_date = (SELECT MIN(hire_date) FROM employee)\nUNION\nSELECT * FROM employee WHERE hire_date = (SELECT MAX(hire_date) FROM employee);",
            setup: "CREATE TABLE employee (id INT, name VARCHAR(50), hire_date DATE);\nINSERT INTO employee VALUES (1,'A','2020-01-01'), (2,'B','2023-05-15'), (3,'C','2026-02-11');"
        },
        { 
            id: 4, 
            q: "Most recent transaction for each customer.", 
            sql: "SELECT customer_id, MAX(tx_date) FROM transactions GROUP BY customer_id;",
            setup: "CREATE TABLE transactions (id INT, customer_id INT, tx_date DATE);\nINSERT INTO transactions VALUES (1,101,'2024-01-01'), (2,101,'2024-02-01'), (3,102,'2024-01-15');"
        },
        { 
            id: 5, 
            q: "Total salary per department > 50,000.", 
            sql: "SELECT department, SUM(salary) FROM employee GROUP BY department HAVING SUM(salary) > 50000;",
            setup: "CREATE TABLE employee (id INT, dept VARCHAR(50), salary INT);\nINSERT INTO employee VALUES (1,'IT',30000), (2,'IT',40000), (3,'HR',20000);"
        },
        { 
            id: 6, 
            q: "Running total of orders for each customer.", 
            sql: "SELECT customer_id, order_date, amount, SUM(amount) OVER (PARTITION BY customer_id ORDER BY order_date) as running_total FROM orders;",
            setup: "CREATE TABLE orders (id INT, customer_id INT, order_date DATE, amount INT);\nINSERT INTO orders VALUES (1,1,'2024-01-01',100), (2,1,'2024-01-02',200), (3,2,'2024-01-01',500);"
        },
        { 
            id: 7, 
            q: "Employees hired per month and year.", 
            sql: "SELECT YEAR(hire_date), MONTH(hire_date), COUNT(*) FROM employee GROUP BY YEAR(hire_date), MONTH(hire_date);",
            setup: "CREATE TABLE employee (id INT, hire_date DATE);\nINSERT INTO employee VALUES (1,'2023-01-10'), (2,'2023-01-20'), (3,'2024-02-15');"
        },
        { 
            id: 8, 
            q: "Earn more than department average salary.", 
            sql: "SELECT * FROM employee e WHERE salary > (SELECT AVG(salary) FROM employee WHERE dept = e.dept);",
            setup: "CREATE TABLE employee (id INT, dept VARCHAR(10), salary INT);\nINSERT INTO employee VALUES (1,'IT',5000), (2,'IT',9000), (3,'HR',4000);"
        },
        { 
            id: 9, 
            q: "Second-lowest salary without LIMIT/OFFSET.", 
            sql: "SELECT MIN(salary) FROM employee WHERE salary > (SELECT MIN(salary) FROM employee);",
            setup: "CREATE TABLE employee (salary INT);\nINSERT INTO employee VALUES (1000), (2000), (3000), (4000);"
        },
        { 
            id: 10, 
            q: "Products never ordered.", 
            sql: "SELECT p.name FROM products p LEFT JOIN orders o ON p.id = o.p_id WHERE o.p_id IS NULL;",
            setup: "CREATE TABLE products (id INT, name VARCHAR(50));\nCREATE TABLE orders (o_id INT, p_id INT);\nINSERT INTO products VALUES (1,'Mobile'), (2,'Laptop');\nINSERT INTO orders VALUES (101, 1);"
        },
        { 
            id: 11, 
            q: "Employees who are also managers.", 
            sql: "SELECT DISTINCT e.name FROM employee e JOIN employee m ON e.id = m.manager_id;",
            setup: "CREATE TABLE employee (id INT, name VARCHAR(50), manager_id INT);\nINSERT INTO employee VALUES (1,'Manager Bob', NULL), (2,'Alice', 1);"
        },
        { 
            id: 12, 
            q: "Joined in same month and year.", 
            sql: "SELECT hire_date, COUNT(*) FROM employee GROUP BY YEAR(hire_date), MONTH(hire_date) HAVING COUNT(*) > 1;",
            setup: "CREATE TABLE employee (id INT, hire_date DATE);\nINSERT INTO employee VALUES (1,'2024-05-01'), (2,'2024-05-15'), (3,'2024-06-01');"
        },
        { 
            id: 13, 
            q: "Older than average age of department.", 
            sql: "SELECT * FROM employee e WHERE age > (SELECT AVG(age) FROM employee WHERE dept = e.dept);",
            setup: "CREATE TABLE employee (id INT, dept VARCHAR(10), age INT);\nINSERT INTO employee VALUES (1,'IT',25), (2,'IT',35), (3,'HR',40);"
        },
        { 
            id: 14, 
            q: "Longest tenure at company.", 
            sql: "SELECT * FROM employee WHERE hire_date = (SELECT MIN(hire_date) FROM employee);",
            setup: "CREATE TABLE employee (id INT, hire_date DATE);\nINSERT INTO employee VALUES (1,'2015-01-01'), (2,'2020-01-01');"
        },
        { 
            id: 15, 
            q: "Delete records where column is NULL.", 
            sql: "DELETE FROM employee WHERE email IS NULL;",
            setup: "CREATE TABLE employee (id INT, email VARCHAR(50));\nINSERT INTO employee VALUES (1,'test@test.com'), (2, NULL);"
        },
        { 
            id: 16, 
            q: "Pairs of products ordered together.", 
            sql: "SELECT a.p_id, b.p_id FROM order_items a JOIN order_items b ON a.o_id = b.o_id WHERE a.p_id < b.p_id;",
            setup: "CREATE TABLE order_items (o_id INT, p_id INT);\nINSERT INTO order_items VALUES (1,10), (1,20), (2,10);"
        },
        { 
            id: 17, 
            q: "Average order value per customer per month.", 
            sql: "SELECT customer_id, MONTH(order_date), AVG(amount) FROM orders GROUP BY customer_id, MONTH(order_date);",
            setup: "CREATE TABLE orders (customer_id INT, order_date DATE, amount INT);\nINSERT INTO orders VALUES (1,'2024-01-01',100), (1,'2024-01-15',200);"
        },
        { 
            id: 18, 
            q: "Purchased every month for the past year.", 
            sql: "SELECT customer_id FROM orders WHERE order_date >= '2025-01-01' GROUP BY customer_id HAVING COUNT(DISTINCT MONTH(order_date)) = 12;",
            setup: "CREATE TABLE orders (customer_id INT, order_date DATE);\n-- Mock data requires 12 months of entries for one ID"
        },
        { 
            id: 19, 
            q: "Total revenue per region per quarter.", 
            sql: "SELECT region, QUARTER(sale_date), SUM(rev) FROM sales GROUP BY region, QUARTER(sale_date);",
            setup: "CREATE TABLE sales (region VARCHAR(10), sale_date DATE, rev INT);\nINSERT INTO sales VALUES ('North','2024-01-10',1000), ('North','2024-04-10',2000);"
        },
        { 
            id: 20, 
            q: "First purchase date of each customer.", 
            sql: "SELECT customer_id, MIN(order_date) FROM orders GROUP BY customer_id;",
            setup: "CREATE TABLE orders (customer_id INT, order_date DATE);\nINSERT INTO orders VALUES (1,'2020-01-01'), (1,'2021-01-01');"
        },
        { 
            id: 21, 
            q: "Year-on-year growth of revenue.", 
            sql: "SELECT yr, rev, LAG(rev) OVER (ORDER BY yr) as last_yr FROM (SELECT YEAR(date) as yr, SUM(amount) as rev FROM sales GROUP BY yr) t;",
            setup: "CREATE TABLE sales (date DATE, amount INT);\nINSERT INTO sales VALUES ('2023-01-01',100), ('2024-01-01',150);"
        },
        { 
            id: 22, 
            q: "Nth highest salary.", 
            sql: "SELECT DISTINCT salary FROM employee e1 WHERE n-1 = (SELECT COUNT(DISTINCT salary) FROM employee e2 WHERE e2.salary > e1.salary);",
            setup: "CREATE TABLE employee (salary INT);\nINSERT INTO employee VALUES (1000), (2000), (3000), (4000), (5000);"
        },
        { 
            id: 23, 
            q: "Rank employees within department.", 
            sql: "SELECT name, dept, salary, DENSE_RANK() OVER (PARTITION BY dept ORDER BY salary DESC) as rnk FROM employee;",
            setup: "CREATE TABLE employee (name VARCHAR(10), dept VARCHAR(10), salary INT);\nINSERT INTO employee VALUES ('A','IT',5000), ('B','IT',6000);"
        },
        { 
            id: 24, 
            q: "Find duplicate emails.", 
            sql: "SELECT email FROM users GROUP BY email HAVING COUNT(email) > 1;",
            setup: "CREATE TABLE users (email VARCHAR(50));\nINSERT INTO users VALUES ('a@b.com'), ('a@b.com'), ('c@d.com');"
        },
        { 
            id: 25, 
            q: "Update salary by 10%.", 
            sql: "UPDATE employee SET salary = salary * 1.10 WHERE dept = 'IT';",
            setup: "CREATE TABLE employee (name VARCHAR(10), dept VARCHAR(10), salary INT);\nINSERT INTO employee VALUES ('Prasad','IT',10000);"
        }
    ];
    const basicsData = [
        { topic: "DB Management", q: "Database Create/Drop/Alter", sql: "-- Create\nCREATE DATABASE myDB;\n-- Drop\nDROP DATABASE myDB;\n-- Read Only Mode\nALTER DATABASE myDB READ ONLY=1;" },
        { topic: "Table DDL", q: "Create and Rename Table", sql: "CREATE TABLE employees (\n  employee_id INT,\n  first_name VARCHAR(50),\n  last_name VARCHAR(50),\n  hourly_pay DECIMAL(5,2),\n  hire_date DATE \n);\n\nRENAME TABLE employees TO workers;" },
        { topic: "Table Alteration", q: "Add/Rename/Modify Columns", sql: "ALTER TABLE employees ADD phone_number VARCHAR(15);\nALTER TABLE employees RENAME COLUMN phone_number TO email;\nALTER TABLE employees MODIFY COLUMN email VARCHAR(100) AFTER last_name;\nALTER TABLE employees DROP COLUMN email;" },
        { topic: "DML", q: "Insert, Update, and Delete", sql: "INSERT INTO employees VALUES (1,'Eugene','Krabs',25.50,'2025-01-01');\n\nUPDATE employees SET hourly_pay = 10.20 WHERE employee_id = 1;\n\nDELETE FROM employees WHERE employee_id = 5;" },
        { topic: "Constraints", q: "Unique, Not Null, Check, Default", sql: "ALTER TABLE products ADD CONSTRAINT UNIQUE(product_name);\nALTER TABLE products MODIFY price DECIMAL(4,2) NOT NULL;\nALTER TABLE employees ADD CONSTRAINT chk_hourly_pay CHECK (hourly_pay >=10);\nALTER TABLE products ALTER price SET DEFAULT 0.00;" },
        { topic: "Joins", q: "Inner, Left, and Right Joins", sql: "-- Inner\nSELECT transaction_id, amount, first_name FROM transactions \nINNER JOIN customers ON transactions.customer_id = customers.customer_id;\n\n-- Left\nSELECT * FROM transactions LEFT JOIN customers ON transactions.customer_id = customers.customer_id;" },
        { topic: "Advanced", q: "Stored Procedures", sql: "DELIMITER // \nCREATE PROCEDURE find_customer(IN id INT)\nBEGIN\n  SELECT * FROM customers WHERE customer_id = id;\nEND // \nDELIMITER ;\n\nCALL find_customer(1);" },
        { topic: "Automation", q: "Triggers", sql: "CREATE TRIGGER before_hourly_pay_update\nBEFORE UPDATE ON employees\nFOR EACH ROW\nSET NEW.salary = (NEW.hourly_pay * 2080);" }
    ];

    function showTab(tabId) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function renderList(targetId, data, hasSetup = false) {
        const container = document.getElementById(targetId);
        data.forEach(item => {
            const card = document.createElement('div');
            card.className = 'q-card';
            card.innerHTML = `
                <span class="q-title">${item.id ? item.id + '. ' : ''}${item.q}</span>
                <div class="btn-group">
                    <button class="btn btn-copy" onclick="copy(this, \`${item.sql}\`)">Copy Code</button>
                    ${hasSetup ? `<button class="btn btn-setup" style="background:#e67e22;color:white" onclick="copy(this, \`${item.setup}\`)">Copy Setup</button>` : ''}
                </div>
                <pre><code>${item.sql}</code></pre>
            `;
            container.appendChild(card);
        });
    }

    function copy(btn, text) {
        navigator.clipboard.writeText(text).then(() => {
            const old = btn.innerText;
            btn.innerText = 'Copied!';
            btn.classList.add('copied');
            setTimeout(() => { btn.innerText = old; btn.classList.remove('copied'); }, 1500);
        });
    }

    renderList('interview-list', interviewData, true);
    renderList('basics-list', basicsData, false);
</script>

</body>
</html>
